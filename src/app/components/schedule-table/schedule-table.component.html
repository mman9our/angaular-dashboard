<div class="font-cairo schedule-container">
  <div class="mx-auto w-full px-4 md:px-6 lg:max-w-none">
    <!-- Schedule Filters -->
    <app-schedule-filters (filtersChanged)="onFiltersChanged($event)"> </app-schedule-filters>

    <!-- Schedule Table -->
    <div class="w-full mt-4 overflow-x-auto lg:overflow-visible overscroll-x-contain max-w-full">
      <div class="inline-block min-w-[680px] align-top lg:block lg:w-full lg:min-w-0">
        <div class="bg-white border border-border rounded-lg overflow-hidden shadow-sm">
          <table class="w-full border-collapse table-fixed">
            <!-- Table Header -->
            <thead class="bg-gray-50 border-b border-border">
              <tr>
                <th
                  class="p-3 lg:p-5 text-center font-semibold text-foreground text-sm lg:text-lg border-l border-border w-32 lg:w-40"
                >
                  الأوقات والدروس
                </th>
                @for (day of days; track day.id) {
                <th
                  class="p-3 lg:p-5 text-center font-semibold text-foreground text-sm lg:text-lg border-l border-border"
                >
                  {{ day.name }}
                </th>
                }
              </tr>
            </thead>

            <!-- Table Body -->
            <tbody class="divide-y divide-border">
              @for (period of schedule; track period.number) {
              <tr class="min-h-16">
                <!-- Period Number -->
                <td
                  class="p-3 lg:p-4 border-l border-border bg-gray-50 text-center font-semibold text-foreground align-middle"
                >
                  <div class="text-base lg:text-xl">{{ period.number }}</div>
                </td>
                <!-- Subjects -->
                @for (subject of period.subjects; track $index) {
                <td
                  class="p-2 lg:p-4 text-xs md:text-sm lg:text-base cursor-pointer transition-all duration-300 relative border-l border-border align-middle"
                  [class]="
                    getSubjectColor(subject.id).color + ' ' + getSubjectColor(subject.id).textColor
                  "
                  [class.subject-highlighted]="isSubjectHighlighted(subject.id)"
                  [class.subject-dimmed]="isSubjectDimmed(subject.id)"
                  (click)="onSubjectClick(subject.id)"
                >
                  <div class="font-medium">{{ subject.name }}</div>
                  <div class="text-xs">{{ subject.teacher }}</div>
                  <!-- Selection indicator -->
                  @if (isSubjectHighlighted(subject.id)) {
                  <div
                    class="absolute top-1 right-1 w-2 h-2 bg-blue-500 rounded-full animate-pulse"
                  ></div>
                  }
                </td>
                }
              </tr>
              }
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
