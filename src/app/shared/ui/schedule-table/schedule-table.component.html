<div class="font-cairo schedule-container">
  <div class="mx-auto w-full px-4 md:px-6 lg:max-w-none">
    <!-- Schedule Filters -->
    <app-schedule-filters (filtersChanged)="onFiltersChanged($event)"> </app-schedule-filters>

    <!-- Schedule Table -->
    <div class="w-full mt-4 overflow-x-auto lg:overflow-visible overscroll-x-contain max-w-full">
      <div class="inline-block min-w-[680px] align-top lg:block lg:w-full lg:min-w-0">
        <div class="bg-white border border-border rounded-lg overflow-hidden shadow-sm">
          <!-- Table Header -->
          <div class="bg-gray-50 border-b border-border">
            <div class="grid grid-cols-6 gap-0">
              <div
                class="p-3 lg:p-5 text-center font-semibold text-foreground text-sm lg:text-lg border-l border-border"
              >
                الأوقات والدروس
              </div>
              <div
                *ngFor="let day of days"
                class="p-3 lg:p-5 text-center font-semibold text-foreground text-sm lg:text-lg border-l border-border"
              >
                {{ day }}
              </div>
            </div>
          </div>

          <!-- Table Body -->
          <div class="divide-y divide-border">
            <div *ngFor="let period of schedule" class="grid grid-cols-6 gap-0 min-h-16">
              <!-- Period Number -->
              <div
                class="p-3 lg:p-4 border-l border-border bg-gray-50 text-center font-semibold text-foreground"
              >
                <div class="text-base lg:text-xl">{{ period.number }}</div>
              </div>
              <!-- Subjects -->
              <div
                *ngFor="let subject of period.subjects; let isLast = last"
                class="p-2 lg:p-4 text-xs md:text-sm lg:text-base cursor-pointer transition-all duration-300 relative"
                [class]="
                  getSubjectColor(subject.id).color + ' ' + getSubjectColor(subject.id).textColor
                "
                [class.border-l]="!isLast"
                [class.border-border]="!isLast"
                [class.subject-highlighted]="isSubjectHighlighted(subject.id)"
                [class.subject-dimmed]="isSubjectDimmed(subject.id)"
                [class.subject-normal]="
                  !isSubjectHighlighted(subject.id) && !isSubjectDimmed(subject.id)
                "
                (click)="onSubjectClick(subject.id)"
              >
                <div class="font-medium">{{ subject.name }}</div>
                <div class="text-xs">{{ subject.teacher }}</div>
                <!-- Selection indicator -->
                <div
                  *ngIf="isSubjectHighlighted(subject.id)"
                  class="absolute top-1 right-1 w-2 h-2 bg-blue-500 rounded-full animate-pulse"
                ></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
